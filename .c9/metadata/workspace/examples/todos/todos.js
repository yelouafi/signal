{"filter":false,"title":"todos.js","tooltip":"/examples/todos/todos.js","undoManager":{"mark":16,"position":16,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":56,"column":0},"action":"insert","lines":["var _ = ss_;","var todoList = $('#todoList'),","\ttodoText = $('#todoText'),","\taddTodo = $('#addTodo'),","\t","\tnewTodo = ss.obj({ text: addTodo.$click().map(todoText.getter('value')) }),","\tremoveTodo = todoList.signal('li', '$removeTodo').map('.detail.data'),","\tsortTodos = $('.sort').$click(),","\t","\tttodo = $.t('todo', function(data) {","\t\treturn { ","\t\t\tcss: { done: this.$('.done').$checked() },","\t\t\t'>span': { text: data.text },","\t\t\t$removeTodo: this.$('.remove').$click().val(data)","\t\t};","\t});","\t","function todos(add, remove, sort) {","\t","\tfunction isValid(todo) {","\t\treturn todo.text && todo.text.trim();","\t}","\t","\tvar addValid \t= add.filter(isValid);","\tvar addInvalid \t= add.filter(_.fnot(isValid));","\t","\tvar todos = ss.def([],","\t\t[addValid, function(todo) { ","\t\t\treturn todos().concat(todo); }],","\t\t[remove, function(todo) { ","\t\t\tvar arr = todos().slice(); ","\t\t\t_.remove(arr, todo); ","\t\t\treturn arr; }],","\t\t[sort, function () {","\t\t\treturn _.sort(todos().slice(), 'text');","\t\t}]","\t);","\treturn {","\t\taddValid: addValid,","\t\taddInvalid: addInvalid,","\t\ttodos: todos","\t}","\t","}","","var mTodos = todos(newTodo, removeTodo, sortTodos);","var textError = ss.bstate(false, mTodos.addInvalid, mTodos.addValid).log('text error: ');","$(todoText, {","\tvalue: mTodos.addValid.val(''),","\tcss: { error: textError },","\tfocus: mTodos.addValid","});","","$(todoList, { ","\tchildren: ttodo.collect(mTodos.todos)","});",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":0,"column":12},"action":"remove","lines":["var _ = ss_;"]},{"start":{"row":0,"column":0},"end":{"row":0,"column":29},"action":"insert","lines":["var ss = window.ss, $ = ss.$;"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":29},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":19},"end":{"row":0,"column":20},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":20},"end":{"row":0,"column":21},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":21},"end":{"row":0,"column":22},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":22},"end":{"row":0,"column":23},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":23},"end":{"row":0,"column":24},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":24},"end":{"row":0,"column":25},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":24},"end":{"row":0,"column":25},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":23},"end":{"row":0,"column":24},"action":"remove","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":23},"end":{"row":0,"column":24},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":24},"end":{"row":0,"column":25},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":26},"end":{"row":0,"column":27},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":27},"end":{"row":0,"column":28},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":28},"end":{"row":0,"column":29},"action":"insert","lines":[","]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":29},"end":{"row":0,"column":29},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":8,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1424642609001,"hash":"42911cc830ec0b51c106918b7dfd57f01369c939"}