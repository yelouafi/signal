{"filter":false,"title":"signalold.js","tooltip":"/src/signalold.js","undoManager":{"mark":73,"position":73,"stack":[[{"group":"doc","deltas":[{"start":{"row":2,"column":8},"end":{"row":2,"column":18},"action":"remove","lines":["window.ss_"]},{"start":{"row":2,"column":8},"end":{"row":2,"column":9},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":9},"end":{"row":2,"column":10},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":10},"end":{"row":2,"column":11},"action":"insert","lines":["q"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":11},"end":{"row":2,"column":12},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":12},"end":{"row":2,"column":13},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":8},"end":{"row":2,"column":13},"action":"remove","lines":["requi"]},{"start":{"row":2,"column":8},"end":{"row":2,"column":19},"action":"insert","lines":["require(\"\")"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":17},"end":{"row":2,"column":18},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":18},"end":{"row":2,"column":19},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":19},"end":{"row":2,"column":20},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":21},"end":{"row":2,"column":22},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":22},"end":{"row":2,"column":23},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":23},"end":{"row":2,"column":24},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":24},"end":{"row":2,"column":25},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":12},"end":{"row":0,"column":13},"action":"remove","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":11},"end":{"row":0,"column":12},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":10},"end":{"row":0,"column":11},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":9},"end":{"row":0,"column":10},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":8},"end":{"row":0,"column":9},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":7},"end":{"row":0,"column":8},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"remove","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"remove","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"remove","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":0},"end":{"row":373,"column":4},"action":"remove","lines":["}())"]}]}],[{"group":"doc","deltas":[{"start":{"row":372,"column":0},"end":{"row":373,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":371,"column":1},"end":{"row":372,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":17},"end":{"row":2,"column":18},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":18},"end":{"row":2,"column":19},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":30},"end":{"row":3,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":0},"end":{"row":21,"column":2},"action":"remove","lines":["function Event() { ","\tthis.slots = []; ","}","","Event.prototype.on \t= function(slot) { _.add(this.slots, slot, true); };","Event.prototype.off \t= function(slot) { _.remove(this.slots, slot); };","Event.prototype.emit = function (data) { ","\t_.each( this.slots, _.callw( data ) ) ","};"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":17},"end":{"row":215,"column":18},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":18},"end":{"row":215,"column":19},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":225,"column":0},"end":{"row":232,"column":1},"action":"remove","lines":["function smap() {","\tvar args = _.isArray( arguments[0] ) ? arguments[0] : _.slice( arguments ),","\t\tfn = _.fn( args.pop() );","\t\t","\treturn combine( args, function( values, src, __ ) {","\t\treturn _.any( values, neant ) ? neant : fn.apply( null, values );","\t} );","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":224,"column":0},"end":{"row":225,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":223,"column":1},"end":{"row":224,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":143,"column":1},"end":{"row":144,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":144,"column":0},"end":{"row":145,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":0},"end":{"row":152,"column":1},"action":"insert","lines":["function smap() {","\tvar args = _.isArray( arguments[0] ) ? arguments[0] : _.slice( arguments ),","\t\tfn = _.fn( args.pop() );","\t\t","\treturn combine( args, function( values, src, __ ) {","\t\treturn _.any( values, neant ) ? neant : fn.apply( null, values );","\t} );","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":214,"column":0},"end":{"row":226,"column":1},"action":"remove","lines":["function or() {","\tvar args = _.isArray( arguments[0] ) ? arguments[0] : _.slice( arguments );","\treturn combine( args, function( values, src, __ ) {","\t\treturn src ? src() : neant;","\t});","}","","function and() {","\tvar args = _.isArray( arguments[0] ) ? arguments[0] : _.slice( arguments );","\treturn combine( args, function( values, src, __ ) {","\t\treturn src && !_.any( values, neant ) ? src() : neant;","\t});","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":213,"column":0},"end":{"row":214,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":1},"end":{"row":153,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":0},"end":{"row":154,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":0},"end":{"row":166,"column":1},"action":"insert","lines":["function or() {","\tvar args = _.isArray( arguments[0] ) ? arguments[0] : _.slice( arguments );","\treturn combine( args, function( values, src, __ ) {","\t\treturn src ? src() : neant;","\t});","}","","function and() {","\tvar args = _.isArray( arguments[0] ) ? arguments[0] : _.slice( arguments );","\treturn combine( args, function( values, src, __ ) {","\t\treturn src && !_.any( values, neant ) ? src() : neant;","\t});","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":243,"column":0},"end":{"row":254,"column":1},"action":"remove","lines":["function def( start, reactions /*, ... */ ) {","\tvar sources = _.map( discr( _.slice( arguments, 1 ) ), smap );","\treturn combine( sources, function( values, src, __ ) {","\t\treturn !src ? start : src();","\t});","\t","\tfunction discr( reacs ) {","\t\treturn _.map( reacs, function(r) {  ","\t\t\treturn [ r[0].occ ].concat( r.slice( 1 ) );\t} ","\t\t);\t","\t}","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":242,"column":0},"end":{"row":243,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":241,"column":1},"end":{"row":242,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":1},"end":{"row":167,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":0},"end":{"row":168,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":168,"column":0},"end":{"row":179,"column":1},"action":"insert","lines":["function def( start, reactions /*, ... */ ) {","\tvar sources = _.map( discr( _.slice( arguments, 1 ) ), smap );","\treturn combine( sources, function( values, src, __ ) {","\t\treturn !src ? start : src();","\t});","\t","\tfunction discr( reacs ) {","\t\treturn _.map( reacs, function(r) {  ","\t\t\treturn [ r[0].occ ].concat( r.slice( 1 ) );\t} ","\t\t);\t","\t}","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":242,"column":0},"end":{"row":254,"column":1},"action":"remove","lines":["function iif( cond, then, elze ) {","\treturn smap( cond, then, elze, function( c, th, el ) {","\t\treturn c ? th : el;","\t} )","}","","function obj(conf) {","\treturn smap(conf, _.id);","}","","function bstate(start, evOn, evOff) {","\treturn def( start, [evOn, true], [evOff, false]);","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":241,"column":0},"end":{"row":242,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":240,"column":0},"end":{"row":241,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":239,"column":1},"end":{"row":240,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":179,"column":1},"end":{"row":180,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":180,"column":0},"end":{"row":181,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":0},"end":{"row":193,"column":1},"action":"insert","lines":["function iif( cond, then, elze ) {","\treturn smap( cond, then, elze, function( c, th, el ) {","\t\treturn c ? th : el;","\t} )","}","","function obj(conf) {","\treturn smap(conf, _.id);","}","","function bstate(start, evOn, evOff) {","\treturn def( start, [evOn, true], [evOff, false]);","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":270,"column":0},"end":{"row":294,"column":1},"action":"remove","lines":["function lift( fn ) {","\treturn function() {","\t\treturn smap( [].concat( _.slice( arguments ), fn ) );    ","\t};","}","","function sfilter( source, test ) {","\ttest = _.fn( test, _.eq(test) );","\treturn def( neant,","\t\t[source, function(v) { return test(v) ? v : neant; }]","\t);","}","","function sreduce( source, startValue, fn ) {","\treturn def( startValue,","\t\t[ source, _.freduce( startValue, fn ) ]","\t);","}","","function cycle(source, first, second) {","\tvar occ = event.reduce( 0, inc );","\treturn smap( occ, first, second, function( o, f, s) {","\t\treturn o % 2 === 0 ? f : s;","\t} )","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":193,"column":1},"end":{"row":194,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":194,"column":0},"end":{"row":195,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":195,"column":0},"end":{"row":219,"column":1},"action":"insert","lines":["function lift( fn ) {","\treturn function() {","\t\treturn smap( [].concat( _.slice( arguments ), fn ) );    ","\t};","}","","function sfilter( source, test ) {","\ttest = _.fn( test, _.eq(test) );","\treturn def( neant,","\t\t[source, function(v) { return test(v) ? v : neant; }]","\t);","}","","function sreduce( source, startValue, fn ) {","\treturn def( startValue,","\t\t[ source, _.freduce( startValue, fn ) ]","\t);","}","","function cycle(source, first, second) {","\tvar occ = event.reduce( 0, inc );","\treturn smap( occ, first, second, function( o, f, s) {","\t\treturn o % 2 === 0 ? f : s;","\t} )","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":298,"column":0},"end":{"row":312,"column":1},"action":"remove","lines":["function array( arr, add, remove ) {","\tarr = arr || [];","\tvar changes = {};","\tvar len = function() { return arr.length };","\tvar res = def( arr,","\t\t[add, \t\tfunction(v) { arr.push(v); return arr; }],","\t\t[remove, \tfunction(v) {  ","\t\t\tvar idx = arr.indexOf(v); ","\t\t\tif( idx >= 0) arr.splice(idx, 1); ","\t\t\treturn arr;","\t\t}]","\t);","\tres.len = res.reduce( len(), len );","\treturn res;","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":297,"column":0},"end":{"row":298,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":296,"column":0},"end":{"row":297,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":295,"column":0},"end":{"row":296,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":294,"column":1},"end":{"row":295,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":212,"column":1},"end":{"row":213,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":213,"column":0},"end":{"row":214,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":214,"column":0},"end":{"row":228,"column":1},"action":"insert","lines":["function array( arr, add, remove ) {","\tarr = arr || [];","\tvar changes = {};","\tvar len = function() { return arr.length };","\tvar res = def( arr,","\t\t[add, \t\tfunction(v) { arr.push(v); return arr; }],","\t\t[remove, \tfunction(v) {  ","\t\t\tvar idx = arr.indexOf(v); ","\t\t\tif( idx >= 0) arr.splice(idx, 1); ","\t\t\treturn arr;","\t\t}]","\t);","\tres.len = res.reduce( len(), len );","\treturn res;","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":214,"column":0},"end":{"row":235,"column":1},"action":"remove","lines":["function array( arr, add, remove ) {","\tarr = arr || [];","\tvar changes = {};","\tvar len = function() { return arr.length };","\tvar res = def( arr,","\t\t[add, \t\tfunction(v) { arr.push(v); return arr; }],","\t\t[remove, \tfunction(v) {  ","\t\t\tvar idx = arr.indexOf(v); ","\t\t\tif( idx >= 0) arr.splice(idx, 1); ","\t\t\treturn arr;","\t\t}]","\t);","\tres.len = res.reduce( len(), len );","\treturn res;","}","","function cycle(source, first, second) {","\tvar occ = event.reduce( 0, inc );","\treturn smap( occ, first, second, function( o, f, s) {","\t\treturn o % 2 === 0 ? f : s;","\t} )","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":213,"column":0},"end":{"row":214,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":202,"column":33},"end":{"row":223,"column":1},"action":"insert","lines":["function array( arr, add, remove ) {","\tarr = arr || [];","\tvar changes = {};","\tvar len = function() { return arr.length };","\tvar res = def( arr,","\t\t[add, \t\tfunction(v) { arr.push(v); return arr; }],","\t\t[remove, \tfunction(v) {  ","\t\t\tvar idx = arr.indexOf(v); ","\t\t\tif( idx >= 0) arr.splice(idx, 1); ","\t\t\treturn arr;","\t\t}]","\t);","\tres.len = res.reduce( len(), len );","\treturn res;","}","","function cycle(source, first, second) {","\tvar occ = event.reduce( 0, inc );","\treturn smap( occ, first, second, function( o, f, s) {","\t\treturn o % 2 === 0 ? f : s;","\t} )","}"]}]}]]},"ace":{"folds":[{"start":{"row":32,"column":19},"end":{"row":85,"column":0},"placeholder":"..."}],"scrolltop":3743,"scrollleft":0,"selection":{"start":{"row":312,"column":0},"end":{"row":340,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":319,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1424620807593,"hash":"d2e6500498f6d26197270e00a2759cfe08d7d7aa"}